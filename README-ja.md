# URL Collector

[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT)

[English](./README.md) | [日本語](./README-ja.md)

URL Collectorは、Webページ上のリンクURLを効率的に収集、編集、エクスポートするために設計されたブラウザ拡張機能です。直感的なサイドパネルUIと強力な要素選択モードを提供し、リサーチやデータ収集のワークフローを効率化します。

![URL Collector Screenshot](https://i.imgur.com/your-screenshot.png) <!-- TODO: 実際のスクリーンショットに置き換えてください -->

## 概要

Webブラウジング中、リサーチ、コンテンツのキュレーション、分析などの目的で、ページからリンクのリストを収集する必要が頻繁にあります。各リンクを右クリックして手動でコピーするのは、退屈で間違いやすい作業です。URL Collectorは、専用の「選択モード」を導入することでこの問題を解決します。ワンクリックでURL収集を開始し、ページ上の任意のリンク要素をクリックするだけでURLを収集できます。収集されたURLはクリーンなサイドパネルに表示され、その場で編集したり、さまざまな形式でエクスポートしたりできます。

## 特徴

- **🖱️ ワンクリック選択モード**: リンクのデフォルトの遷移動作を無効にし、URL収集に特化したモードを有効化します。
- **✨ 視覚的フィードバック**: ホバーした要素をハイライトし、クリックが成功したことを示すアニメーションで確認できます。
- **📝 パネル内編集**: 収集したURLをサイドパネル内で直接編集・削除できます。
- **🔗 スマートなリンク検出**: `<a>`タグ内のネストされた要素（画像やテキストなど）をクリックした場合でも、正しいリンクを自動的に見つけ出します。
- **📋 複数のエクスポート形式**: 
  - クリップボードにコピー（改行区切り）
  - CSV形式でダウンロード
  - JSON形式でダウンロード
- **⌨️ キーボードショートカット**: カスタマイズ可能なショートカットキー（デフォルトは**Ctrl+Shift+U** / **Cmd+Shift+U**）で選択モードを切り替えられます。
- **🗑️ 全て削除**: 収集したURLのリスト全体をワンクリックでクリアできます。
- **🌐 多言語対応**: UIは英語と日本語で利用可能です。
- **🛡️ Manifest V3**: 最新かつ最も安全なブラウザ拡張機能プラットフォームに基づいて構築されています。

## インストール方法

この拡張機能はまだChromeウェブストアで公開されていないため、デベロッパーモードを使用して手動でインストールする必要があります。

**Chrome, Edge, BraveなどのChromiumベースのブラウザ向け:**

1.  **ダウンロード**: [最新リリース](https://github.com/your-repo/url-collector/releases)から`url-collector-extension.zip`ファイルをダウンロードし、解凍します。
2.  **拡張機能ページを開く**: ブラウザを開き、`chrome://extensions`（または`edge://extensions`, `brave://extensions`）にアクセスします。
3.  **デベロッパーモードを有効化**: 右上隅にある「デベロッパーモード」のトグルをオンにします。
4.  **拡張機能を読み込む**: 左上に表示される「パッケージ化されていない拡張機能を読み込む」ボタンをクリックします。
5.  **フォルダを選択**: ファイルダイアログで、解凍した`url-collector-extension`フォルダを選択します。

これで完了です！ブラウザのツールバーにURL Collectorのアイコンが表示されます。

## 使い方

1.  **サイドパネルを開く**: ブラウザのツールバーにあるURL Collectorアイコンをクリックしてサイドパネルを開きます。
2.  **選択モードを開始**: サイドパネルのトグルスイッチをクリックするか、キーボードショートカット（**Ctrl+Shift+U** / **Cmd+Shift+U**）を使用して選択モードを有効にします。ページのカーソルが十字に変わります。
3.  **URLを収集**: 
    - ページ上の任意のリンクにホバーすると、青い枠線でハイライトされます。
    - リンクをクリックすると、フラッシュアニメーションでクリックが確認され、URLがサイドパネルのリストに追加されます。
4.  **編集と管理**: 
    - 収集されたURLは、自動的に折り返されてリサイズされる`textarea`フィールドに表示されます。
    - 各URLはテキストエリア内で直接編集できます。
    - URLの隣にある`×`ボタンをクリックすると、個別に削除できます。
    - 上部にあるゴミ箱アイコンをクリックすると、収集したすべてのURLを一度に削除できます。
5.  **データをエクスポート**: 
    - サイドパネルの下部で、希望するエクスポート形式（クリップボード、CSV、JSON）のチェックボックスをオンにします。
    - 「Complete」ボタンをクリックします。エクスポート形式が選択されていない場合、ボタンは無効になります。
6.  **選択モードを終了**: 再度トグルスイッチをクリックするか、ショートカットを使用して選択モードをオフにし、通常のブラウジングに戻ります。

## 開発ガイド

このガイドでは、開発環境のセットアップ、アーキテクチャの理解、および拡張機能のデバッグ方法について説明します。

### プロジェクト構造

リポジトリは、標準的なブラウザ拡張機能の構造に従っています。

```
url-collector-extension/
├── manifest.json          # 中核となる設定、権限、メタデータ
├── background.js          # バックグラウンドタスク用のサービスワーカー（ショートカットなど）
├── sidepanel.html         # サイドパネルUIのHTML構造
├── sidepanel.js           # サイドパネルUIとユーザー操作のロジック
├── content.js             # DOM操作を処理するためにWebページに注入されるスクリプト
├── icons/                 # 拡張機能のアイコン用ディレクトリ
│   ├── icon16.png
│   ├── icon48.png
│   └── icon128.png
├── README.md              # 英語版README
└── README-ja.md           # 日本語版README（このファイル）
```

### アーキテクチャと通信フロー

この拡張機能は、`chrome.runtime.sendMessage` APIを介して通信する3つの主要コンポーネントで構成されています。

1.  **サイドパネル (`sidepanel.js`)**: メインのユーザーインターフェース。選択モードを有効または無効にするためにコンテンツスクリプトにメッセージを送信します。
2.  **コンテンツスクリプト (`content.js`)**: アクティブなタブに注入されます。マウスイベントをリッスンし、要素をハイライトし、収集したURLを拡張機能の他の部分に送信します。
3.  **バックグラウンドスクリプト (`background.js`)**: キーボードショートカット（`chrome.commands`）や拡張機能のアクションアイコンのクリックなど、グローバルなイベントをリッスンするサービスワーカーです。

**通信ワークフロー:**

-   **モード切り替え（サイドパネルから）**: `sidepanel.js` -> `content.js` (`ENABLE_COLLECTION` / `DISABLE_COLLECTION`)
-   **モード切り替え（ショートカットから）**: `background.js` -> `content.js` (`TOGGLE_COLLECTION`)
-   **URL収集時**: `content.js` -> `sidepanel.js` (`URL_COLLECTED`)
-   **モード状態の同期**: `content.js` -> `sidepanel.js` (`COLLECTION_MODE_CHANGED`) ショートカットが使用されたときにUIを同期させるため。

### デバッグ

ブラウザ拡張機能のデバッグは、各コンポーネントを個別に調査することで行います。

-   **サイドパネル**: サイドパネル内のどこかを右クリックし、「検証」を選択します。これにより、サイドパネルのコンテキスト専用のDevToolsウィンドウが開き、DOMの調査、コンソールログの確認、JavaScriptのデバッグができます。
-   **コンテンツスクリプト**: 表示しているWebページのDevToolsを開きます（F12またはCtrl+Shift+I）。コンテンツスクリプトの`console.log`メッセージはここに表示されます。また、「ソース」>「コンテンツスクリプト」タブでスクリプトのソースコードを見つけてブレークポイントを設定することもできます。
-   **バックグラウンドスクリプト（サービスワーカー）**: `chrome://extensions`に移動し、URL Collectorのカードを見つけて「サービスワーカー」のリンクをクリックします。これにより、バックグラウンドスクリプト用のDevToolsウィンドウが開き、キーボードショートカットやその他のバックグラウンドイベントのデバッグに不可欠です。

### キーボードショートカットのカスタマイズ

ユーザーはデフォルトのショートカットを変更できます。

1.  `chrome://extensions/shortcuts`にアクセスします。
2.  リストから「URL Collector」を見つけます。
3.  「選択モードの切り替え」コマンドの横にある鉛筆アイコンをクリックし、希望のキーの組み合わせを入力します。

## コントリビューション

コントリビューションを歓迎します！新機能のアイデアやバグを見つけた場合は、issueを開いてください。コードで貢献したい場合は、以下の手順に従ってください。

1.  リポジトリをフォークします。
2.  新しいブランチを作成します（`git checkout -b feature/your-feature-name`）。
3.  変更を加えます。
4.  変更をコミットします（`git commit -m 'Add some feature'`）。
5.  ブランチにプッシュします（`git push origin feature/your-feature-name`）。
6.  プルリクエストを開きます。

## ライセンス

このプロジェクトは[MITライセンス](./LICENSE)の下で公開されています。
